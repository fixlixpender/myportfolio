<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Filipe Oliveira | The Developer's Deck</title>

    <script src="background.js"></script>
    
    <!-- Tailwind CSS (via CDN for standalone use) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Share Tech Mono + Russo One) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>

    <!-- Configuration for Tailwind Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cyber: {
                            black: "#050505",
                            dark: "#0a0a0a",
                            blue: "#00f0ff",
                            pink: "#ff00ff",
                            green: "#00ff41",
                            red: "#ff2a2a",
                        },
                    },
                    fontFamily: {
                        mono: ['"Share Tech Mono"', 'monospace'],
                        russo: ['"Russo One"', 'sans-serif'], // <--- NEW FONT
                    },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(to right, #111 1px, transparent 1px), linear-gradient(to bottom, #111 1px, transparent 1px)",
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS for Animations & CRT Effects -->
    <style>
        body {
            background-color: #050505;
            color: #e0e0e0;
            overflow-x: hidden;
            font-family: "Share Tech Mono", monospace;
        }

        

        /* Glitch Effect on Hover */
.glitch-hover:hover {
    animation: glitch-anim 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
    color: #ff00ff; /* Changes text color to pink while glitching */
}

@keyframes glitch-anim {
    0% { transform: translate(0) }
    20% { transform: translate(-2px, 2px) }
    40% { transform: translate(-2px, -2px) }
    60% { transform: translate(2px, 2px) }
    80% { transform: translate(2px, -2px) }
    100% { transform: translate(0) }
}

        @keyframes scrollScanlines {
            0% { background-position: 0 0; }
            100% { background-position: 0 100%; }
        }


        /* Utility Glows */
        .neon-text-blue { text-shadow: 0 0 5px #00f0ff; }
        .neon-box-green:hover { box-shadow: 0 0 10px #00ff41, inset 0 0 5px #00ff41; border-color: #00ff41; }
        .neon-box-blue:hover { box-shadow: 0 0 10px #00f0ff, inset 0 0 5px #00f0ff; border-color: #00f0ff; }
        .neon-box-pink:hover { box-shadow: 0 0 10px #ff00ff, inset 0 0 5px #ff00ff; border-color: #ff00ff; }

        /* Animation Classes */
        .fade-in { animation: fadeIn 1s forwards; opacity: 0; }
        .slide-up { animation: slideUp 0.8s forwards; opacity: 0; transform: translateY(20px); }
        
        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* Hidden Utility */
        .hidden-force { display: none !important; }

        .blink-hard {
            animation: blinker 1s step-end infinite;
        }
        @keyframes blinker {
            50% { opacity: 0; }
        }

        /* --- ADVANCED RGB GLITCH EFFECT --- */
.glitch-wrapper {
    position: relative;
    color: white; /* Main Text Color */
    z-index: 1;
}

/* Create the Red/Pink Layer */
.glitch-wrapper::before {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.8;
    z-index: -1;
    
    /* Glitch Color 1 (Pink/Red) */
    color: #ff00ff; 
    background: #050505; /* Matches background to hide main text behind the slice */
    
    /* Animation */
    animation: glitch-anim-1 2.5s infinite linear alternate-reverse;
}

/* Create the Blue/Cyan Layer */
.glitch-wrapper::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.8;
    z-index: -2;
    
    /* Glitch Color 2 (Cyan/Blue) */
    color: #00f0ff;
    background: #050505;
    
    /* Animation */
    animation: glitch-anim-2 3s infinite linear alternate-reverse;
}

/* Animation Details: Slicing the text */
@keyframes glitch-anim-1 {
    0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px, 1px); }
    20% { clip-path: inset(60% 0 10% 0); transform: translate(2px, -1px); }
    40% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 2px); }
    60% { clip-path: inset(80% 0 5% 0); transform: translate(2px, -2px); }
    80% { clip-path: inset(10% 0 70% 0); transform: translate(-1px, 1px); }
    100% { clip-path: inset(30% 0 50% 0); transform: translate(1px, -1px); }
}

@keyframes glitch-anim-2 {
    0% { clip-path: inset(10% 0 60% 0); transform: translate(2px, -1px); }
    20% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 2px); }
    40% { clip-path: inset(30% 0 20% 0); transform: translate(2px, 1px); }
    60% { clip-path: inset(10% 0 80% 0); transform: translate(-1px, -2px); }
    80% { clip-path: inset(50% 0 30% 0); transform: translate(1px, 2px); }
    100% { clip-path: inset(70% 0 10% 0); transform: translate(-2px, -1px); }
}
    </style>
</head>
<body class="bg-cyber-black min-h-screen relative pb-24">

    <!-- CLICK TO START OVERLAY -->
<div id="start-overlay" class="fixed inset-0 bg-cyber-black z-[200] flex items-center justify-center cursor-pointer">
    <div class="text-center">
        <div class="text-cyber-green text-2xl md:text-4xl font-mono tracking-widest animate-pulse border-b-2 border-cyber-green pb-2">
            >> INITIALIZE SYSTEM <<
        </div>
        <p class="text-cyber-blue mt-4 text-xs md:text-sm font-mono opacity-70">
            [ CLICK ANYWHERE TO BOOT ]
        </p>
    </div>
</div>

    

<!-- NEW: Three.js Background Container -->
<div id="canvas-container" class="fixed inset-0 z-[-1] pointer-events-none"></div>

    <!-- 1. BOOT SEQUENCE OVERLAY -->
    <div id="boot-screen" class="fixed inset-0 bg-cyber-black z-[100] flex flex-col justify-end p-8 text-cyber-green text-lg md:text-xl">
        <div class="max-w-2xl w-full mx-auto" id="log-container">
            <!-- Logs will be injected here by JS -->
        </div>
    </div>

    <!-- 2. MAIN DASHBOARD (Initially Hidden) -->
    <!-- Changed p-6 to px-6 pb-6 pt-24 (More space at the top for mobile) -->
<main id="main-interface" class="hidden-force px-6 pb-6 pt-24 md:p-12 max-w-[1600px] mx-auto w-full z-10 relative">
        
        <!-- Header -->
        <header class="mb-12 border-b border-cyber-green/30 pb-6 flex justify-between items-end fade-in">
            <div>
                <h2 class="text-cyber-green text-sm mb-2 tracking-widest">
                    SYSTEM: <span class="blink-hard">ONLINE</span>
                </h2>
                <!-- Added 'glitch-permanent' class -->
                <!-- Removed 'font-bold', Added 'font-rubik' -->
                <!-- Added 'data-text' attribute -->
                <h1 class="text-3xl md:text-6xl font-russo text-white cursor-default glitch-wrapper" data-text="THE DEVELOPER'S DECK">
                    THE DEVELOPER'S DECK
                </h1>
                <p class="mt-2 text-cyber-pink max-w-lg">FILIPE // DEV OPERATIVE</p>
            </div>
            <div class="flex flex-col items-end gap-2">
    <!-- Music Toggle Button -->
    <button id="music-btn" class="border border-cyber-green text-cyber-green px-3 py-1 text-xs hover:bg-cyber-green hover:text-black transition-colors uppercase font-mono">
        MUSIC: OFF
    </button>

    <!-- Version Info (Hidden on mobile to save space) -->
    <div class="hidden md:block text-right">
        <div class="text-cyber-pink text-xs">BUILD v.1.0</div>
        <div class="text-cyber-blue text-xs">SECURE CONNECTION</div>
    </div>
</div>
        </header>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            
            <!-- Col 1: Navigation -->
            <nav class="lg:col-span-1 flex flex-col gap-4 slide-up" style="animation-delay: 0.2s;">
                <a href="#" onclick="handleNav('PROJECTS')" class="bg-transparent border border-gray-800 p-6 text-center transition-all duration-300 neon-box-blue group">
                    <span class="font-bold text-lg group-hover:text-cyber-blue">PROJECTS [LS]</span>
                </a>
                <a href="#" onclick="handleNav('ABOUT')" class="bg-transparent border border-gray-800 p-6 text-center transition-all duration-300 neon-box-green group">
                    <span class="font-bold text-lg group-hover:text-cyber-green">IDENTITY [WHOAMI]</span>
                </a>
                <a href="#" onclick="handleNav('CONTACT')" class="bg-transparent border border-gray-800 p-6 text-center transition-all duration-300 neon-box-pink group">
                    <span class="font-bold text-lg group-hover:text-cyber-pink">RECRUIT [RECRUIT]</span>
                </a>

                <div class="mt-auto p-4 border border-cyber-green/20 bg-transparent">
                    <h3 class="text-cyber-green text-xs mb-2">SKILL_TREE</h3>
                    <div class="flex flex-wrap gap-2 text-xs text-cyber-blue">
                        <span>JavaScript</span>/<span>HTML5</span>/<span>TAILWIND</span>/<span>THREE.JS</span>
                    </div>
                </div>
            </nav>

            <!-- Col 2: Main Feed -->
            <section class="lg:col-span-2 flex flex-col gap-6 slide-up" style="animation-delay: 0.4s;">
                <div class="bg-transparent border border-cyber-green/30 p-6 relative overflow-hidden group hover:border-cyber-green transition-colors duration-300">
                    <div class="absolute top-0 left-0 w-1 h-full bg-cyber-green/50 group-hover:h-full transition-all duration-500"></div>
                    <h3 class="text-xl text-cyber-blue mb-2">LATEST_DEPLOYMENT</h3>
                    <p class="text-gray-300 mb-4">Project "MY_JAVA_ROOM" deployed. An interactive 3D environment built with Three.js and WebGL.</p>
                    <div class="flex gap-2">
                        <span class="px-2 py-1 bg-cyber-blue/10 text-cyber-blue text-xs border border-cyber-blue/30">3D environment</span>
                        <span class="px-2 py-1 bg-cyber-blue/10 text-cyber-blue text-xs border border-cyber-blue/30">Design</span>
                    </div>
                </div>

                <div class="bg-transparent border border-cyber-pink/30 p-6 relative overflow-hidden group hover:border-cyber-pink transition-colors duration-300">
                    <h3 class="text-xl text-cyber-pink mb-2">DEV_LOG_ENTRY_404</h3>
                    <p class="text-gray-300">This Website was built on a lightweight, framework-free stack using HTML5, Vanilla JavaScript, and Tailwind CSS for a custom cyberpunk aesthetic.
                                Powered by Three.js and Google Fonts, delivering a high-performance "zero-build" static website.</p>
                </div>
            </section>

            <!-- Col 3: Status -->
            <aside class="lg:col-span-1 flex flex-col gap-4 slide-up" style="animation-delay: 0.6s;">
                <div class="border border-cyber-green/30 p-4 bg-transparent">
                    <h4 class="text-cyber-green text-xs border-b border-cyber-green/20 pb-2 mb-2">LOCATION_DATA</h4>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-400">CITY:</span>
                        <span class="text-cyber-blue">COVENTRY</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400">REGION:</span>
                        <span class="text-cyber-blue">UK</span>
                    </div>
                </div>

                <div class="border border-cyber-blue/30 p-4 bg-transparent">
                    <h4 class="text-cyber-blue text-xs border-b border-cyber-blue/20 pb-2 mb-2">SYSTEM_STATUS</h4>
                    <div class="space-y-2">
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 bg-cyber-green rounded-full animate-pulse"></div>
                            <span class="text-xs text-gray-300">SERVER: OPTIMAL</span>
                        </div>
                        <div class="w-full bg-gray-800 h-1 mt-2">
                            <div class="bg-cyber-blue h-full" style="width: 87%"></div>
                        </div>
                        <div class="text-right text-[10px] text-cyber-blue">MEMORY_LOAD: 87%</div>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- 3. TERMINAL COMPONENT -->
    <div class="fixed bottom-0 left-0 w-full bg-cyber-black/95 border-t border-cyber-green/30 p-4 backdrop-blur-sm z-40">
        <div class="max-w-7xl mx-auto w-full">
            <!-- Helper Text Area -->
            <div id="terminal-helper" class="text-cyber-blue mb-2 overflow-hidden h-0 transition-all duration-300"></div>
            
            <!-- Input Line -->
        <div class="flex items-center text-sm md:text-xl text-cyber-green">
            <!-- Responsive Prompt: Shows 'admin@deck:~$' on PC, but just '~$' on Mobile -->
            <span class="mr-2 md:mr-3 font-bold">
                <span class="hidden md:inline">admin@deck:</span>~$
            </span>
            
            <input 
                id="terminal-input"
                type="text" 
                class="flex-1 bg-transparent border-none outline-none text-cyber-green placeholder-cyber-green/30 uppercase font-mono min-w-0"
                placeholder="ENTER COMMAND..."
                autocomplete="off"
            >
        </div>
        </div>
    </div>

    <!-- Hidden Audio Player -->
        <audio id="bg-music" loop>
            <source src="oppression.mp3" type="audio/mpeg">
        </audio>

    <!-- JAVASCRIPT LOGIC -->
    <script>
    // ==========================================
    // 1. CONFIGURATION & VARIABLES
    // ==========================================
    const logs = [
        "WAKE UP USER",
        "LOADING NEURAL INTERFACE...",
        "ESTABLISHING CONNECTION TO COVENTRY UK SERVER...",
        "FIREWALL LOGS AUDITED: NO BREACHES DETECTED",
        "ACCESS GRANTED",
        "DECK ONLINE.",
        "WELCOME"
    ];
    
    // DOM Elements
    const logContainer = document.getElementById('log-container');
    const bootScreen = document.getElementById('boot-screen');
    const mainInterface = document.getElementById('main-interface');
    const startOverlay = document.getElementById('start-overlay');
    const input = document.getElementById('terminal-input');
    const helper = document.getElementById('terminal-helper');
    
    // Audio Elements
    const music = document.getElementById('bg-music');
    const musicBtn = document.getElementById('music-btn');

    // State
    let logIndex = 0;

    // ==========================================
    // ==========================================
    // 2. AUDIO SYSTEM (SFX) - UPDATED
    // ==========================================
    function playSFX(id) {
        // Check if user is on mobile (Screen smaller than 768px)
        const isMobile = window.innerWidth < 768;

        // BLOCK SPECIFIC SOUNDS ON MOBILE
        if (isMobile) {
            if (id === 'sfx-hover') return; // Stop Hover Bleeps
            if (id === 'sfx-type') return;  // Stop Typing Clicks
        }

        const audio = document.getElementById(id);
        if (audio) {
            audio.volume = 0.3; 
            audio.currentTime = 0; 
            // Try to play
            audio.play().catch(e => console.log("Audio waiting for interaction..."));
        }
    }

    // ==========================================
    // 3. BOOT SEQUENCE LOGIC
    // ==========================================
    function runBootSequence() {
        if (logIndex < logs.length) {
            // Create a new log line
            const div = document.createElement('div');
            div.className = "mb-2 border-l-2 border-cyber-green pl-2 animate-pulse";
            div.innerHTML = `<span class="opacity-50 mr-2">[${new Date().toLocaleTimeString()}]</span> ${logs[logIndex]}`;
            
            // Add to screen
            logContainer.appendChild(div);
            
            // Play typing sound for every line (optional, maybe too noisy?)
            // playSFX('sfx-type'); 

            logIndex++;
            setTimeout(runBootSequence, 500); // Next line in 500ms
        } else {
            // Sequence Complete
            sessionStorage.setItem('deck_booted', 'true'); // <--- ADD THIS LINE
            
            setTimeout(() => {
                // Fade out boot screen
                bootScreen.style.transition = "opacity 0.8s ease";
                bootScreen.style.opacity = "0";
                
                setTimeout(() => {
                    bootScreen.remove(); // Remove from DOM
                    mainInterface.classList.remove('hidden-force'); // Show Dashboard
                    mainInterface.classList.add('fade-in'); // Trigger fade animation
                }, 800);
            }, 800);
        }
    }

    // ==========================================
    // 4. START SCREEN INTERACTION (SCROLL FIX)
    // ==========================================
    
    // Check if we have been here before
    const isBooted = sessionStorage.getItem('deck_booted');

    if (isBooted === 'true') {
        // --- RETURNING VISITOR ---
        
        // 1. Force Scroll to Top (Fixes the "Cut Off" issue)
        window.scrollTo(0, 0);

        if (startOverlay) startOverlay.style.display = 'none';
        
        if (bootScreen) {
            bootScreen.style.display = 'flex';
            bootScreen.style.opacity = '1';
        }

        logIndex = 0; 
        logContainer.innerHTML = ''; 
        runBootSequence();

    } else {
        // --- FIRST TIME VISITOR ---
        if (startOverlay) {
            startOverlay.addEventListener('click', () => {
                sessionStorage.setItem('deck_booted', 'true');

                // 1. Force Scroll to Top
                window.scrollTo(0, 0);

                startOverlay.style.transition = "opacity 0.5s ease";
                startOverlay.style.opacity = '0';
                setTimeout(() => startOverlay.remove(), 500);

                playSFX('sfx-boot');

                logIndex = 0; 
                logContainer.innerHTML = ''; 
                runBootSequence();
            });
        }
    }

    // ==========================================
    // 5. TERMINAL & COMMAND LOGIC
    // ==========================================
    
    // Focus Logic: Keep input focused unless clicking a button/link
    document.addEventListener('click', (e) => {
        if (e.target.closest('button') || e.target.closest('a') || window.getSelection().toString().length > 0) {
            return;
        }
        input.focus();
    });

    // Keydown Logic
    input.addEventListener('keydown', function(e) {
        playSFX('sfx-type'); // Typing sound

        if (e.key === 'Enter') {
            playSFX('sfx-enter'); // Enter sound
            const command = input.value.trim().toUpperCase();
            processCommand(command);
            input.value = ''; 
        }
    });

    function processCommand(cmd) {
        let msg = "";
        let action = null;

        switch(cmd) {
            case "WHOAMI":
            case "ABOUT":
                msg = "NAVIGATING TO IDENTITY MATRIX...";
                action = () => setTimeout(() => window.location.href = "about.html", 1000);
                break;
            case "LS":
            case "PROJECTS":
                msg = "LISTING PROJECT DIRECTORIES...";
                action = () => setTimeout(() => window.location.href = "projects.html", 1000);
                break;
            case "RECRUIT":
            case "CONTACT":
                msg = "OPENING COMM CHANNELS...";
                action = () => setTimeout(() => window.location.href = "contact.html", 1000);
                break;
            
            // Music Commands
            case "MUSIC ON":
                msg = "AUDIO STREAM ESTABLISHED.";
                action = () => {
                    music.play();
                    updateMusicBtn(true);
                };
                break;
            case "MUSIC OFF":
                msg = "AUDIO STREAM DISCONNECTED.";
                action = () => {
                    music.pause();
                    updateMusicBtn(false);
                };
                break;

            // System Commands
            case "RESTART":
            case "REBOOT":
                msg = "INITIATING SYSTEM REBOOT...";
                // Clear the memory so the animation plays again
                sessionStorage.removeItem('deck_booted'); // <--- ADD THIS LINE
                action = () => setTimeout(() => window.location.reload(), 1000);
                break;

            case "HELP":
                msg = "COMMANDS: WHOAMI, LS, RECRUIT, MUSIC ON/OFF, REBOOT";
                break;
            case "CLEAR":
                msg = "";
                helper.style.height = "0";
                helper.innerHTML = "";
                return;
            default:
                msg = `COMMAND '${cmd}' NOT RECOGNIZED. TRY 'HELP'.`;
        }

        if (msg) {
            helper.innerHTML = `>> ${msg}`;
            helper.style.height = "auto";
        }
        if (action) action();
    }

    // Dashboard Navigation Helper (Simulates Terminal)
    function handleNav(destination) {
        processCommand(destination); 
    }

    // ==========================================
    // 6. MUSIC BUTTON LOGIC
    // ==========================================
    function updateMusicBtn(isPlaying) {
        if (isPlaying) {
            musicBtn.innerHTML = "[ MUSIC: <span class='animate-pulse'>ON</span> ]";
            musicBtn.classList.remove('border-cyber-green', 'text-cyber-green', 'hover:bg-cyber-green');
            musicBtn.classList.add('border-cyber-pink', 'text-cyber-pink', 'hover:bg-cyber-pink');
        } else {
            musicBtn.innerHTML = "[ MUSIC: OFF ]";
            musicBtn.classList.remove('border-cyber-pink', 'text-cyber-pink', 'hover:bg-cyber-pink');
            musicBtn.classList.add('border-cyber-green', 'text-cyber-green', 'hover:bg-cyber-green');
        }
    }

    if (musicBtn) {
        musicBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent terminal focus
            playSFX('sfx-click'); // Optional click sound
            
            if (music.paused) {
                music.play();
                updateMusicBtn(true);
            } else {
                music.pause();
                updateMusicBtn(false);
            }
        });
    }

    // ==========================================
    // 7. HOVER SOUNDS
    // ==========================================
    document.querySelectorAll('a, button').forEach(btn => {
        btn.addEventListener('mouseenter', () => {
            playSFX('sfx-hover');
        });
    });

</script>

    <!-- SOUND EFFECTS -->
<!-- Note: volume="0.2" isn't valid HTML, we set volume in JS -->
<audio id="sfx-type" src="sfx-type1.mp3"></audio>
<audio id="sfx-enter" src="sfx-enter.mp3"></audio>
<audio id="sfx-hover" src="sfx-hover.mp3"></audio>
<audio id="sfx-boot" src="sfx-boot.mp3"></audio>
</body>
</html>