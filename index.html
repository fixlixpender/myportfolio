<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Filipe Oliveira | The Developer's Deck</title>

    <script src="background.js"></script>
    
    <!-- Tailwind CSS (via CDN for standalone use) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>

    <!-- Configuration for Tailwind Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cyber: {
                            black: "#050505",
                            dark: "#0a0a0a",
                            blue: "#00f0ff",
                            pink: "#ff00ff",
                            green: "#00ff41",
                            red: "#ff2a2a",
                        },
                    },
                    fontFamily: {
                        mono: ['"Share Tech Mono"', 'monospace'],
                    },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(to right, #111 1px, transparent 1px), linear-gradient(to bottom, #111 1px, transparent 1px)",
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS for Animations & CRT Effects -->
    <style>
        body {
            background-color: #050505;
            color: #e0e0e0;
            overflow-x: hidden;
            font-family: "Share Tech Mono", monospace;
        }

        

        /* Glitch Effect on Hover */
.glitch-hover:hover {
    animation: glitch-anim 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
    color: #ff00ff; /* Changes text color to pink while glitching */
}

@keyframes glitch-anim {
    0% { transform: translate(0) }
    20% { transform: translate(-2px, 2px) }
    40% { transform: translate(-2px, -2px) }
    60% { transform: translate(2px, 2px) }
    80% { transform: translate(2px, -2px) }
    100% { transform: translate(0) }
}

        @keyframes scrollScanlines {
            0% { background-position: 0 0; }
            100% { background-position: 0 100%; }
        }


        /* Utility Glows */
        .neon-text-blue { text-shadow: 0 0 5px #00f0ff; }
        .neon-box-green:hover { box-shadow: 0 0 10px #00ff41, inset 0 0 5px #00ff41; border-color: #00ff41; }
        .neon-box-blue:hover { box-shadow: 0 0 10px #00f0ff, inset 0 0 5px #00f0ff; border-color: #00f0ff; }
        .neon-box-pink:hover { box-shadow: 0 0 10px #ff00ff, inset 0 0 5px #ff00ff; border-color: #ff00ff; }

        /* Animation Classes */
        .fade-in { animation: fadeIn 1s forwards; opacity: 0; }
        .slide-up { animation: slideUp 0.8s forwards; opacity: 0; transform: translateY(20px); }
        
        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* Hidden Utility */
        .hidden-force { display: none !important; }

        .blink-hard {
            animation: blinker 1s step-end infinite;
        }
        @keyframes blinker {
            50% { opacity: 0; }
        }

        /* Permanent Glitch Animation */
        .glitch-permanent {
            animation: glitch-snap 3s infinite;
        }

        @keyframes glitch-snap {
            /* 0% to 92% is stable (readable) */
            0%, 87% { 
                text-shadow: none; 
                transform: none; 
            }
            /* 93% to 99% is the glitch spike */
            88% { 
                text-shadow: 3px 0 #ff00ff, -3px 0 #00f0ff; 
                transform: skew(10deg); 
            }
            90% { 
                text-shadow: -3px 0 #ff00ff, 3px 0 #00f0ff; 
                transform: skew(-10deg); 
            }
            93% { 
                text-shadow: none; 
                transform: none; 
            }
            96% { 
                text-shadow: 2px -2px #ff00ff; 
                transform: translate(-5px, 0); 
            }
            98% { 
                text-shadow: -2px 2px #00f0ff; 
                transform: translate(5px, 0); 
            }
            100% { 
                text-shadow: none; 
                transform: none; 
            }
        }
    </style>
</head>
<body class="bg-cyber-black min-h-screen relative pb-24">

    

<!-- NEW: Three.js Background Container -->
<div id="canvas-container" class="fixed inset-0 z-[-1] pointer-events-none"></div>

    <!-- 1. BOOT SEQUENCE OVERLAY -->
    <div id="boot-screen" class="fixed inset-0 bg-cyber-black z-[100] flex flex-col justify-end p-8 text-cyber-green text-lg md:text-xl">
        <div class="max-w-2xl w-full mx-auto" id="log-container">
            <!-- Logs will be injected here by JS -->
        </div>
    </div>

    <!-- 2. MAIN DASHBOARD (Initially Hidden) -->
    <main id="main-interface" class="hidden-force p-6 md:p-12 max-w-[1600px] mx-auto w-full z-10 relative">
        
        <!-- Header -->
        <header class="mb-12 border-b border-cyber-green/30 pb-6 flex justify-between items-end fade-in">
            <div>
                <h2 class="text-cyber-green text-sm mb-2 tracking-widest">
                    SYSTEM: <span class="blink-hard">ONLINE</span>
                </h2>
                <!-- Added 'glitch-permanent' class -->
                <h1 class="text-4xl md:text-6xl font-bold text-cyber-blue cursor-default glitch-permanent">FILIPE'S DECK</h1>
                <p class="mt-2 text-gray-400 max-w-lg">FULL-STACK OPERATIVE</p>
            </div>
            <div class="flex flex-col items-end gap-2">
    <!-- Music Toggle Button -->
    <button id="music-btn" class="border border-cyber-green text-cyber-green px-3 py-1 text-xs hover:bg-cyber-green hover:text-black transition-colors uppercase font-mono">
        MUSIC: OFF
    </button>

    <!-- Version Info (Hidden on mobile to save space) -->
    <div class="hidden md:block text-right">
        <div class="text-cyber-pink text-xs">BUILD v.2.0.4</div>
        <div class="text-cyber-blue text-xs">SECURE CONNECTION</div>
    </div>
</div>
        </header>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            
            <!-- Col 1: Navigation -->
            <nav class="lg:col-span-1 flex flex-col gap-4 slide-up" style="animation-delay: 0.2s;">
                <a href="#" onclick="handleNav('PROJECTS')" class="bg-transparent border border-gray-800 p-6 text-center transition-all duration-300 neon-box-blue group">
                    <span class="font-bold text-lg group-hover:text-cyber-blue">PROJECTS [LS]</span>
                </a>
                <a href="#" onclick="handleNav('ABOUT')" class="bg-transparent border border-gray-800 p-6 text-center transition-all duration-300 neon-box-green group">
                    <span class="font-bold text-lg group-hover:text-cyber-green">IDENTITY [WHOAMI]</span>
                </a>
                <a href="#" onclick="handleNav('CONTACT')" class="bg-transparent border border-gray-800 p-6 text-center transition-all duration-300 neon-box-pink group">
                    <span class="font-bold text-lg group-hover:text-cyber-pink">RECRUIT [RECRUIT]</span>
                </a>

                <div class="mt-auto p-4 border border-cyber-green/20 bg-transparent">
                    <h3 class="text-cyber-green text-xs mb-2">SKILL_TREE</h3>
                    <div class="flex flex-wrap gap-2 text-xs text-gray-400">
                        <span>JavaScript</span>/<span>HTML5</span>/<span>TAILWIND</span>/<span>THREE.JS</span>
                    </div>
                </div>
            </nav>

            <!-- Col 2: Main Feed -->
            <section class="lg:col-span-2 flex flex-col gap-6 slide-up" style="animation-delay: 0.4s;">
                <div class="bg-transparent border border-cyber-green/30 p-6 relative overflow-hidden group hover:border-cyber-green transition-colors duration-300">
                    <div class="absolute top-0 left-0 w-1 h-full bg-cyber-green/50 group-hover:h-full transition-all duration-500"></div>
                    <h3 class="text-xl text-cyber-blue mb-2">LATEST_DEPLOYMENT</h3>
                    <p class="text-gray-300 mb-4">Project "MY_JAVA_ROOM" deployed. An interactive 3D environment built with Three.js and WebGL.</p>
                    <div class="flex gap-2">
                        <span class="px-2 py-1 bg-cyber-blue/10 text-cyber-blue text-xs border border-cyber-blue/30">3D environment</span>
                        <span class="px-2 py-1 bg-cyber-blue/10 text-cyber-blue text-xs border border-cyber-blue/30">Design</span>
                    </div>
                </div>

                <div class="bg-transparent border border-cyber-pink/30 p-6 relative overflow-hidden group hover:border-cyber-pink transition-colors duration-300">
                    <h3 class="text-xl text-cyber-pink mb-2">DEV_LOG_ENTRY_404</h3>
                    <p class="text-gray-300">This Website was built on a lightweight, framework-free stack using HTML5, Vanilla JavaScript, and Tailwind CSS for a custom cyberpunk aesthetic.
                                Powered by Three.js and Google Fonts, delivering a high-performance "zero-build" static website.</p>
                </div>
            </section>

            <!-- Col 3: Status -->
            <aside class="lg:col-span-1 flex flex-col gap-4 slide-up" style="animation-delay: 0.6s;">
                <div class="border border-cyber-green/30 p-4 bg-transparent">
                    <h4 class="text-cyber-green text-xs border-b border-cyber-green/20 pb-2 mb-2">LOCATION_DATA</h4>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-400">CITY:</span>
                        <span class="text-cyber-blue">COVENTRY</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400">REGION:</span>
                        <span class="text-cyber-blue">UK</span>
                    </div>
                </div>

                <div class="border border-cyber-blue/30 p-4 bg-transparent">
                    <h4 class="text-cyber-blue text-xs border-b border-cyber-blue/20 pb-2 mb-2">SYSTEM_STATUS</h4>
                    <div class="space-y-2">
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 bg-cyber-green rounded-full animate-pulse"></div>
                            <span class="text-xs text-gray-300">SERVER: OPTIMAL</span>
                        </div>
                        <div class="w-full bg-gray-800 h-1 mt-2">
                            <div class="bg-cyber-blue h-full" style="width: 87%"></div>
                        </div>
                        <div class="text-right text-[10px] text-cyber-blue">MEMORY_LOAD: 87%</div>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- 3. TERMINAL COMPONENT -->
    <div class="fixed bottom-0 left-0 w-full bg-cyber-black/95 border-t border-cyber-green/30 p-4 backdrop-blur-sm z-40">
        <div class="max-w-7xl mx-auto w-full">
            <!-- Helper Text Area -->
            <div id="terminal-helper" class="text-cyber-blue mb-2 overflow-hidden h-0 transition-all duration-300"></div>
            
            <!-- Input Line -->
        <div class="flex items-center text-sm md:text-xl text-cyber-green">
            <!-- Responsive Prompt: Shows 'admin@deck:~$' on PC, but just '~$' on Mobile -->
            <span class="mr-2 md:mr-3 font-bold">
                <span class="hidden md:inline">admin@deck:</span>~$
            </span>
            
            <input 
                id="terminal-input"
                type="text" 
                class="flex-1 bg-transparent border-none outline-none text-cyber-green placeholder-cyber-green/30 uppercase font-mono min-w-0"
                placeholder="ENTER COMMAND..."
                autocomplete="off"
            >
        </div>
        </div>
    </div>

    <!-- Hidden Audio Player -->
        <audio id="bg-music" loop>
            <source src="cyberpunk-bg.mp3" type="audio/mpeg">
        </audio>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. Boot Sequence Logic ---
        const logs = [
            "WAKE UP, FILIPE...",
            "LOADING NEURAL INTERFACE...",
            "CHECKING SECURITY PROTOCOLS... OK",
            "ESTABLISHING CONNECTION TO COVENTRY UK SERVER...",
            "ACCESS GRANTED.",
            "WELCOME."
        ];
        
        const logContainer = document.getElementById('log-container');
        const bootScreen = document.getElementById('boot-screen');
        const mainInterface = document.getElementById('main-interface');
        let logIndex = 0;

        function runBootSequence() {
        // Try to play boot sound immediately
        if (logIndex === 0) {
             playSFX('sfx-boot');
        }

        if (logIndex < logs.length) {
            // ... rest of your existing boot code ...
            } else {
                setTimeout(() => {
                    // Fade out boot screen
                    bootScreen.style.transition = "opacity 0.5s ease";
                    bootScreen.style.opacity = "0";
                    
                    setTimeout(() => {
                        bootScreen.remove(); // Remove from DOM
                        mainInterface.classList.remove('hidden-force'); // Show Dashboard
                    }, 500);
                }, 800);
            }
        }

        // Start Boot on Load
        window.addEventListener('load', runBootSequence);


        // --- 2. Terminal Logic ---
        const input = document.getElementById('terminal-input');
        const helper = document.getElementById('terminal-helper');

        input.addEventListener('keydown', function(e) {
        // Play Typing Sound on any key press
        playSFX('sfx-type');

        if (e.key === 'Enter') {
            // Play Success Sound on Enter
            playSFX('sfx-enter');
            
            const command = input.value.trim().toUpperCase();
            processCommand(command);
            input.value = ''; 
        }
    });

        // Keep focus on input (UNLESS clicking a button or link)
    document.addEventListener('click', (e) => {
        // If user clicked a button, link, or is selecting text, do nothing
        if (e.target.closest('button') || e.target.closest('a') || window.getSelection().toString().length > 0) {
            return;
        }
        input.focus();
    });

        function processCommand(cmd) {
            let msg = "";
            let action = null;
            
            // Get Music Elements
            const music = document.getElementById('bg-music');
            const musicBtn = document.getElementById('music-btn');

            switch(cmd) {
                case "WHOAMI":
                case "ABOUT":
                    msg = "NAVIGATING TO IDENTITY MATRIX...";
                    action = () => setTimeout(() => window.location.href = "about.html", 1000);
                    break;
                case "LS":
                case "PROJECTS":
                    msg = "LISTING PROJECT DIRECTORIES...";
                    action = () => setTimeout(() => window.location.href = "projects.html", 1000);
                    break;
                case "RECRUIT":
                case "CONTACT":
                    msg = "OPENING COMM CHANNELS...";
                    action = () => setTimeout(() => window.location.href = "contact.html", 1000);
                    break;
                
                // --- NEW MUSIC COMMANDS ---
                case "MUSIC ON":
                    msg = "AUDIO STREAM ESTABLISHED.";
                    action = () => {
                        music.play();
                        // Update the visual button to match
                        musicBtn.innerHTML = "MUSIC: <span class='animate-pulse'>ON</span>";
                        musicBtn.classList.remove('border-cyber-green', 'text-cyber-green', 'hover:bg-cyber-green');
                        musicBtn.classList.add('border-cyber-pink', 'text-cyber-pink', 'hover:bg-cyber-pink');
                    };
                    break;
                
                case "MUSIC OFF":
                    msg = "AUDIO STREAM DISCONNECTED.";
                    action = () => {
                        music.pause();
                        // Update the visual button to match
                        musicBtn.innerHTML = "MUSIC: OFF";
                        musicBtn.classList.remove('border-cyber-pink', 'text-cyber-pink', 'hover:bg-cyber-pink');
                        musicBtn.classList.add('border-cyber-green', 'text-cyber-green', 'hover:bg-cyber-green');
                    };
                    break;

                    case "RESTART":
                case "REBOOT":
                    msg = "INITIATING SYSTEM REBOOT...";
                    // Reloads the page after 1 second
                    action = () => setTimeout(() => window.location.reload(), 1000);
                    break;

                // ---------------------------

                case "HELP":
                    msg = "COMMANDS: WHOAMI, LS, RECRUIT, MUSIC ON, MUSIC OFF, CLEAR";
                    break;
                case "CLEAR":
                    msg = "";
                    helper.style.height = "0";
                    helper.textContent = "";
                    return;
                default:
                    msg = `COMMAND '${cmd}' NOT RECOGNIZED. TRY 'HELP'.`;
            }

            // Display Helper Text
            if (msg) {
                helper.innerHTML = `>> ${msg}`; // Changed to innerHTML to support styling if needed
                helper.style.height = "auto";
            }

            // Execute Action if any
            if (action) action();
        }

        // Function for the dashboard buttons to simulate navigation
        function handleNav(destination) {
            processCommand(destination); // Reuse terminal logic for visual consistency
        }

        // --- AUDIO CONTROLLER ---
    const music = document.getElementById('bg-music');
    const musicBtn = document.getElementById('music-btn');
    
    // Set initial volume (optional, 0.0 to 1.0)
    music.volume = 0.5;

    musicBtn.addEventListener('click', (e) => {
        e.stopPropagation(); // <--- ADD THIS LINE (Prevents jumping to terminal)

        if (music.paused) {
            music.play();
            musicBtn.innerHTML = "MUSIC: <span class='animate-pulse'>ON</span>";
            musicBtn.classList.remove('border-cyber-green', 'text-cyber-green', 'hover:bg-cyber-green');
            musicBtn.classList.add('border-cyber-pink', 'text-cyber-pink', 'hover:bg-cyber-pink');
        } else {
            music.pause();
            musicBtn.innerHTML = "MUSIC: OFF";
            musicBtn.classList.remove('border-cyber-pink', 'text-cyber-pink', 'hover:bg-cyber-pink');
            musicBtn.classList.add('border-cyber-green', 'text-cyber-green', 'hover:bg-cyber-green');
        }
    });

    // --- SFX SYSTEM ---
    function playSFX(id) {
        const audio = document.getElementById(id);
        if (audio) {
            audio.volume = 0.3; // Keep SFX subtle (30% volume)
            audio.currentTime = 0; // Reset sound to start (allows rapid firing)
            // Try to play (browsers might block it if user hasn't interacted yet)
            audio.play().catch(e => console.log("Audio waiting for interaction..."));
        }
    }

    // Add Hover Sound to all Dashboard Links
    const buttons = document.querySelectorAll('a, button');
    
    buttons.forEach(btn => {
        btn.addEventListener('mouseenter', () => {
            playSFX('sfx-hover');
        });
    });
        
    </script>

    <!-- SOUND EFFECTS -->
<!-- Note: volume="0.2" isn't valid HTML, we set volume in JS -->
<audio id="sfx-type" src="sfx-type.mp3"></audio>
<audio id="sfx-enter" src="sfx-enter.mp3"></audio>
<audio id="sfx-hover" src="sfx-hover.mp3"></audio>
<audio id="sfx-boot" src="sfx-boot.mp3"></audio>
</body>
</html>